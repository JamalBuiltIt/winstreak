{"ast":null,"code":"import _objectSpread from\"C:/Program Files/myportfolio/Ecommerce Template (For Sale)/winstreak/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{auth}from\"./firebase\";import{getFirestore,collection,query,where,getDocs,doc,getDoc,addDoc,deleteDoc}from\"firebase/firestore\";import\"./Dashboard.css\";import UploadModal from\"./UploadModal\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const db=getFirestore();const Dashboard=()=>{const[user,setUser]=useState(null);const[name,setName]=useState(\"\");const[posts,setPosts]=useState([]);const[rating,setRating]=useState(0);const[hoverRating,setHoverRating]=useState(0);const[showModal,setShowModal]=useState(false);useEffect(()=>{const savedRating=localStorage.getItem(\"userRating\");if(savedRating){setRating(parseInt(savedRating,10));}},[]);useEffect(()=>{const unsubscribe=auth.onAuthStateChanged(async currentUser=>{setUser(currentUser);if(currentUser){const userDocRef=doc(db,\"users\",currentUser.uid);const userDoc=await getDoc(userDocRef);if(userDoc.exists()){setName(userDoc.data().name);}const postsQuery=query(collection(db,\"posts\"),where(\"userId\",\"==\",currentUser.uid));const postsSnapshot=await getDocs(postsQuery);const userPosts=postsSnapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setPosts(userPosts);}else{setName(\"\");setPosts([]);}});return()=>unsubscribe();},[]);const handleDeletePost=async postId=>{if(user){try{const postDocRef=doc(db,\"posts\",postId);await deleteDoc(postDocRef);setPosts(posts.filter(post=>post.id!==postId));alert(\"Post deleted successfully!\");}catch(error){console.error(\"Error deleting post:\",error.message);}}else{alert(\"You need to be logged in to delete a post.\");}};const handleStarClick=starValue=>{setRating(starValue);localStorage.setItem(\"userRating\",starValue);};const handleStarHover=starValue=>{setHoverRating(starValue);};const handleStarLeave=()=>{setHoverRating(0);};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Dashboard\"}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",name||\"User\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"star-rating\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"span\",{className:\"star \".concat(star<=(hoverRating||rating)?\"selected\":\"\"),onClick:()=>handleStarClick(star),onMouseEnter:()=>handleStarHover(star),onMouseLeave:handleStarLeave,children:\"\\u2605\"},star))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-container\",children:[posts.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"There are no video posts from this user.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"video-post-list\",children:posts.map((post,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"video-post-item\",children:[/*#__PURE__*/_jsxs(\"video\",{controls:true,className:\"video-player\",children:[/*#__PURE__*/_jsx(\"source\",{src:post.videoURL,type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"delete-post-wrapper\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeletePost(post.id),className:\"delete-post-button\",children:\"Delete\"})})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(true),className:\"add-post-button\",children:\"Add Video Post\"})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"You are not logged in.\"}),showModal&&/*#__PURE__*/_jsx(UploadModal,{onClose:()=>setShowModal(false)})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","auth","getFirestore","collection","query","where","getDocs","doc","getDoc","addDoc","deleteDoc","UploadModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","db","Dashboard","user","setUser","name","setName","posts","setPosts","rating","setRating","hoverRating","setHoverRating","showModal","setShowModal","savedRating","localStorage","getItem","parseInt","unsubscribe","onAuthStateChanged","currentUser","userDocRef","uid","userDoc","exists","data","postsQuery","postsSnapshot","userPosts","docs","map","_objectSpread","id","handleDeletePost","postId","postDocRef","filter","post","alert","error","console","message","handleStarClick","starValue","setItem","handleStarHover","handleStarLeave","className","children","star","concat","onClick","onMouseEnter","onMouseLeave","length","index","controls","src","videoURL","type","onClose"],"sources":["C:/Program Files/myportfolio/Ecommerce Template (For Sale)/winstreak/src/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { auth } from \"./firebase\";\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  doc,\r\n  getDoc,\r\n  addDoc,\r\n  deleteDoc,\r\n} from \"firebase/firestore\";\r\nimport \"./Dashboard.css\";\r\nimport UploadModal from \"./UploadModal\";\r\n\r\nconst db = getFirestore();\r\n\r\nconst Dashboard = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [name, setName] = useState(\"\");\r\n  const [posts, setPosts] = useState([]);\r\n  const [rating, setRating] = useState(0);\r\n  const [hoverRating, setHoverRating] = useState(0);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const savedRating = localStorage.getItem(\"userRating\");\r\n    if (savedRating) {\r\n      setRating(parseInt(savedRating, 10));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\r\n      setUser(currentUser);\r\n\r\n      if (currentUser) {\r\n        const userDocRef = doc(db, \"users\", currentUser.uid);\r\n        const userDoc = await getDoc(userDocRef);\r\n        if (userDoc.exists()) {\r\n          setName(userDoc.data().name);\r\n        }\r\n\r\n        const postsQuery = query(\r\n          collection(db, \"posts\"),\r\n          where(\"userId\", \"==\", currentUser.uid)\r\n        );\r\n        const postsSnapshot = await getDocs(postsQuery);\r\n        const userPosts = postsSnapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setPosts(userPosts);\r\n      } else {\r\n        setName(\"\");\r\n        setPosts([]);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleDeletePost = async (postId) => {\r\n    if (user) {\r\n      try {\r\n        const postDocRef = doc(db, \"posts\", postId);\r\n        await deleteDoc(postDocRef);\r\n        setPosts(posts.filter((post) => post.id !== postId));\r\n        alert(\"Post deleted successfully!\");\r\n      } catch (error) {\r\n        console.error(\"Error deleting post:\", error.message);\r\n      }\r\n    } else {\r\n      alert(\"You need to be logged in to delete a post.\");\r\n    }\r\n  };\r\n\r\n  const handleStarClick = (starValue) => {\r\n    setRating(starValue);\r\n    localStorage.setItem(\"userRating\", starValue);\r\n  };\r\n\r\n  const handleStarHover = (starValue) => {\r\n    setHoverRating(starValue);\r\n  };\r\n\r\n  const handleStarLeave = () => {\r\n    setHoverRating(0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <h2>Dashboard</h2>\r\n      {user ? (\r\n        <>\r\n          <p>\r\n            Welcome, {name || \"User\"}{\" \"}\r\n            <span className=\"star-rating\">\r\n              {[1, 2, 3, 4, 5].map((star) => (\r\n                <span\r\n                  key={star}\r\n                  className={`star ${\r\n                    star <= (hoverRating || rating) ? \"selected\" : \"\"\r\n                  }`}\r\n                  onClick={() => handleStarClick(star)}\r\n                  onMouseEnter={() => handleStarHover(star)}\r\n                  onMouseLeave={handleStarLeave}\r\n                >\r\n                  â˜…\r\n                </span>\r\n              ))}\r\n            </span>\r\n          </p>\r\n          <div className=\"timeline-container\">\r\n            {posts.length === 0 ? (\r\n              <p>There are no video posts from this user.</p>\r\n            ) : (\r\n              <div className=\"video-post-list\">\r\n                {posts.map((post, index) => (\r\n                  <div key={index} className=\"video-post-item\">\r\n                    <video controls className=\"video-player\">\r\n                      <source src={post.videoURL} type=\"video/mp4\" />\r\n                      Your browser does not support the video tag.\r\n                    </video>\r\n                    <div className=\"delete-post-wrapper\">\r\n                      <button\r\n                        onClick={() => handleDeletePost(post.id)}\r\n                        className=\"delete-post-button\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n            <button onClick={() => setShowModal(true)} className=\"add-post-button\">\r\n              Add Video Post\r\n            </button>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <p>You are not logged in.</p>\r\n      )}\r\n\r\n      {showModal && <UploadModal onClose={() => setShowModal(false)} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}